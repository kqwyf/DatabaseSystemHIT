# 数据库系统

## 第1讲 初步认识数据库系统

### 表 (Table)

#### 表的术语

**表名**：表的名称。

**表标题（格式）**：每一列的列名。

**表内容（值）**：表的内容。

**行/元组/记录**：表中的一行。

**列/字段/属性/数据项**：表中的一列。列中分为**列名**与**列值**。

**关系模式**：表名与表标题的组合。

**表/关系**：表名、表标题与表内容的组合。

**数据库**：相互有关联关系的若干表的集合。

### 数据库系统（工作环境）

#### 构成五要素

**数据库(DB)**：相互有关联关系的数据的集合。

**数据库管理系统(DBMS)**：管理数据库的一种系统软件。

**数据库应用程序(DBAP)**：不同用户使用的完成某功能的应用程序。**通过DBMS来使用数据库**。

**数据库管理员(DBA)**：**直接使用DBMS**来创建与管理数据库的人员。

**计算机基本系统**：使得数据库系统能够正常运行的计算机系统。

### 数据库管理系统 (DBMS)

#### 功能（用户角度）

- **数据库定义**：定义数据库中表的**名称**、**标题（包括属性名称及对属性值的要求）**等。
  - DBMS提供一套**数据定义语言(DDL)**，用户使用DDL描述表的格式，并由DBMS创建数据库。
- **数据库操纵**：向数据库的表中增加/删除/更新数据，以及对数据进行查询/检索/统计等。
  - DBMS提供一套**数据操纵语言(DML)**，用户使用DML描述增、删、改、查等操作，并由DBMS执行。
- **数据库控制**：控制数据库中数据的使用，即用户权限。
  - DBMS提供一套**数据控制语言(DCL)**，用户使用DCL描述对数据库的控制，由DBMS实际进行控制。
- **数据库维护**：转储/恢复/重组/性能检测/分析等功能。
  - DBMS提供一系列用于维护数据库的程序，一般由数据库管理员使用和掌握。

#### 数据库语言

**数据定义语言(DDL)**：用于定义数据格式。

**数据操纵语言(DML)**：用于对数据进行操作。

**数据控制语言(DCL)**：用于对数据进行控制。

上述三种语言联合起来形成**SQL语言**，即结构化查询语言。

##### 特点

- 一条数据库语言语句相当于高级语言的一个或多个循环程序。
- 数据库语言分为**嵌入型**（可嵌入到高级语言中使用，高级语言在此称为宿主语言）、**交互型**（可与用户交互）、**双重型**。

#### 功能（系统角度）

从系统实现角度看，DBMS的功能为**形式→构造→自动化**。

一般而言，操作系统管理存储与缓冲区，DBMS管理索引/文件记录与操作实现算法。但**有一些DBMS可越过操作系统直接管理存储与缓冲区**。

DBMS在后台运行着一系列程序：

- **语言编译器**：将用数据库语言书写的内容翻译为DBMS可执行的命令。如DDL编译器。
- **查询优化与查询实现**：执行引擎及基本命令的不同执行算法，提高数据库检索速度。
- **数据存取与索引**：在存储器上高效存取数据。例如存储管理器，缓冲区管理区，索引/文件和记录管理器。
- **通信控制**：网络环境下操作数据库与传输数据。
- **事务管理**：提高可靠性，避免并发错误。
- **故障恢复**：使数据库自动恢复到故障发生前的正确状态。例如备份、运行日志操控。
- **安全性控制**：合法性检验，避免非授权非法用户访问数据库。
- **完整性控制**：检查数据及数据操作的正确性。
- **数据字典管理**：管理用户已经定义的信息。
- **应用程序接口**：使应用程序能够使用DBMS特定功能。
- **数据库数据装载、重组**
- **数据库性能分析**：统计运行过程中数据库的各种性能数据，便于优化。

## 第2讲 数据库系统的结构抽象与演变

### 数据库系统的标准结构

#### 数据（视图）与模式

**数据（视图）**：某一表现形式下表现出来的数据库中的数据。

**模式**：对数据库中数据进行的一种结构性描述。

#### 三级模式两层映像

数据库系统的标准结构包括**用户层次**、**概念层次**、**内部层次**。总结为如下三级模式，两层映像。

##### 三级模式

- **外部模式（用户模式）**：某一用户能够看到与处理的数据的结构描述，是全局数据的一部分。
- **概念模式（全局模式）**：从全局角度管理的数据的结构描述，包含相应的关联约束，体现数据间的内在本质联系。
- **内部模式（物理模式）**：存储在介质上的数据的结构描述，包含存储路径、存储方式、索引方式等。

通常，**模式**默认意为**全局模式**，**视图**默认意为**外部视图**。

##### 两层映像

- **E-C映像**（即External - Conceptual）：将外模式映射为概念模式，支持数据概念视图向外部视图的转换。
- **C-I映像**（即Conceptual - Internal）：将概念模式映射为内模式，支持数据概念视图向内部视图的转换。

DBMS通常允许**用户自定义三级模式**，而通过**程序自动实现两层映像**。

#### 两个独立性

使用数据库系统标准结构可获得两个独立性：

- **逻辑数据独立性**：概念模式变化时，可以不改变外部模式（只需改变E-C映像），从而无需改变应用程序。
- **物理数据独立性**：内部模式变化时，可以不改变概念模式（只需改变C-I映像），从而无需改变外部模式。

两个独立性的意义都在于不会因为存储结构与逻辑结构的变化而影响应用程序。

### 数据模型

**数据模型**：规定模式统一描述方式的模型，是对模式本身结构的抽象。

- **关系模型**：以**表**的形式组织数据。模式需包含表名及若干属性。
- **层次模型**：以**树**的形式组织数据。模式需以树形组织若干**实体型**，实体型间连线称为**系型**。
- **网状模型**：以**图**的形式组织数据。模型形式与层次模型相似，但允许每个节点有多个父节点与子节点。

其余还有面向对象模型、XML模型、NoSQL模型等。

### 数据库系统的演变与发展

#### 由文件系统到数据库

- 文件系统中，数据存取基本以**记录**为单位。
  - 优点：用户无需考虑文件存储的物理细节。
  - 缺点：数据的组织及语义与应用程序紧密相关；文件及文件的记录之间无联系。
- 数据库系统中，数据由DBMS统一存取。数据存取可以以**记录**为单位，也可以以**数据项**和**记录集合**为单位。
  - 意义：多个应用程序可共享数据及数据结构的操作；系统自动检查安全性、完整性和并发正确性；记录之间相互有关联。

#### 由层次模型数据库、网状模型数据库到关系数据库

- **第一代数据库**：**层次模型数据库**与**网状模型数据库**
  - 缺点：由指针系统维系，结构描述复杂；检索依赖于指针系统指示的路径；不能有效支持记录集合的操作。

- **第二代数据库**：**关系数据库**
  - 意义：结构描述简单；检索不依赖于路径信息或过程信息，支持非过程化的数据操作；有效支持记录集合的操作。

#### 由关系数据库到对象关系数据库、面向对象数据库

- 关系数据库需按**关系的第1范式**组织数据，即**数据项是不可再分**的。
- 对象-关系数据库以对象封装需分解的数据项（多值属性和复合属性）。面向对象数据库支持复杂的数据类型，数据封装与抽象数据结构，并支持面向对象的一些特性。
  - 意义：有效支持不满足关系第1范式的数据项。
- XML数据库被称为**半结构化数据库**，面向数据交换而提出，**数据**与**数据的语义**合并在一起存储处理。XML数据库在互联网中得到广泛应用。

#### 由多种多样的数据库到多数据库开放式互连

使用**开放数据库连接(ODBC)**与不同的DBMS交互，从而统一操作多种数据库。

